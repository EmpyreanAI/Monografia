\label{cap:rwork}

Neste capítulo, serão apresentados os desafios da área em questão em duas frentes: análise técnica e fundamental. Nos últimos anos, vários trabalhos foram publicados no campo de \acrshort{ML} com foco em predição do mercado de ações. A literatura contém trabalhos mais recentes~\cite{fusionportifolio, ga_optimized_lstm, random_forest_macroeconomic, review, airms, forecasting_bayesian, clustering_svm} e outros mais clássicos ao decorrer dos anos~\cite{google_trends, cesarone2011portfolio, predicting_direction_svm,  hybrid_forecasting, gabased_svm, forecasting_returns, nn_forecasting}.  Apesar dos avanços alcançados na área, até o momento não foram encontradas pesquisas propondo serviços híbridos que fazem uso da ambas as análises para negociação de ativos nos mercados.

\section{Análise Fundamental}

Considerando as abordagens que utilizam análise fundamental, \textcite{forecasting_bayesian} investigam o uso de redes Bayesianas como um meio de verificar até que ponto os índices de mercados internacionais influenciam no índice principal do mercado de ações brasileiro, a B3. Com esse intuito, a direção, subida ou decida, do valor dos índices foram usadas como entrada para a rede, sendo passadas em ciclos de 24 e 48 horas, e produzindo como saída a direção do índice B3 no próximo dia. A rede Bayesiana modelada permite a vantagem adicional de permitir um uso mais direto com maior capacidade de tratamentos para seus usuários quando comparada com outros modelos analisados pelo trabalho. No entanto, um aprendizado Bayesiano é computacionalmente muito custoso, o que leva as redes a tenderem para um desempenho pior em dados de grande dimensão.

\textcite{random_forest_macroeconomic} propõem um modelo baseado em florestas aleatórias para seleção de características de variáveis macroeconômicas e, em seguida, uma LSTM, apropriada para predição do mercado. O propósito era examinar o grau de significância entre os preços históricos, de diferentes setores, e variáveis macroeconômicas para predizer o preço mensal de um ativo. Porém, o modelo proposto fornece pouco controle sobre o processo de decisão para predição do mercado, visto que floresta aleatória, geralmente, é considerada como uma técnica de caixa-preta.

Ainda com foco na análise fundamental,~\textcite{google_trends} sugerem que a base de dados massivas resultantes da interação de humanos com a internet (i.e., \textit{Twitter} e \textit{Facebook}) oferece uma perspectiva do comportamento do mercado. O estudo identificou padrões que podem ser interpretados como ``sinais de alerta'' de um alto movimento no mercado de ações, analisando as mudanças no volume de buscas de termos financeiros no Google. Contudo, os pesquisadores escolheram uma premissa de que um aumento nas buscas pode indicar uma baixa do valor do ativo. Essa suposição pode não ser verdadeira para todos os casos.

%Ainda com foco na análise fundamental, a abordagem primária realizada pelos pesquisadores é a análise de sentimentos de redes sociais, tais como \textit{Twitter} e \textit{Facebook}. Nesse contexto, \textcite{google_trends} sugerem que a base de dados massivas resultantes da interação de humanos com a internet pode oferecer uma perspectiva do comportamento do mercado. O estudo identificou padrões que podem ser interpretados como ``sinais de alerta'' de um alto movimento no mercado de ações, analisando as mudanças no volume de buscas de termos financeiros no Google. Contudo, os pesquisadores escolheram uma premissa de que um aumento nas buscas pode indicar uma baixa do valor do ativo. Essa suposição pode não ser verdadeira para todos os casos.

\section{Análise Técnica}

Outra frente de pesquisa utiliza a análise técnica como solução para prever os preços futuros de ativos. \textcite{fusionportifolio} propõem um modelo de decisão para seleção de portfólio de investimentos do tipo \emph{day-trading} usando uma abordagem de classificador baseado na fusão de uma \acrshort{SVM} e da \acrshort{VMM}. Para isso o modelo proposto foi divido em dois estágios: (i) a \acrshort{SVM} seleciona os ativos com maior potencial de retorno; e (ii) o modelo \acrshort{VMM} define a proporção dos recursos para cada ativo do portfólio. No entanto, mesmo \acrshort{VMM} sendo amplamente reconhecido como um dos pilares da teoria moderna de portfólio, o modelo apresenta muitas críticas às simplificações realizadas. Algumas das mais criticadas são: os investidores agem sempre de forma racional, não existe informação privilegiada, e ativos são infinitamente divisíveis \cite{cesarone2011portfolio}. Tais críticas motivam a busca de alternativas mais refinadas para seleção de portfólio. 

Uma outra abordagem técnica é utilizada por \textcite{airms}, que propõem uma ferramenta de gerenciamento de risco, nomeado ARIMS. O principal objetivo do AIRMS é melhorar o desempenho de dois portfólios, prevenindo-os de qualquer perda. No estudo, a ferramenta é modelada usando são usados dois modelos: uma \acrfull{RNA} e uma Árvore de Decisão. O experimento foi aplicado aos cinco maiores pares de moedas entre os anos de 2010 e 2016. Foi observado que AIRMS com a árvore de decisão, e AIRMS com redes neurais obtiveram sucesso em aumentar o retorno total dos portfólios. Isso evidencia que o AIRMS pode transformar anos em que houveram perda em anos mais lucrativos, diminuindo os retornos negativos. Entretanto, deve-se notar que a ferramenta AIRMS foi aplicada somente a portfólios lucrativos, o mesmo comportamento não necessariamente seria observado em portfólios não lucrativos.

\textcite{ga_optimized_lstm} propõem um \acrfull{AG} para otimizar um modelo de LSTM, com base em indicadores técnicos do índice do mercado Coreano. Para avaliar o modelo, diferentes tamanhos de janelas e unidades LSTM foram configurados na função objetivo do \acrshort{AG}. Resultados mostraram que o AG-LSTM apresentou um desempenho melhor que as configurações de referências em todas as medidas de erro. Isso sugere que a hiper-parametrização apropriada da LSTM é uma condição essencial para uma melhora no desempenho. Entretanto, \acrshort{AG}s são usados para otimização de problemas que a qualidade da solução depende do tempo de processamento. Em outras palavras, soluções baseadas em \acrshort{AG} são mais lentas que os métodos tradicionais e, portanto, podem influenciar na predição dos ativos do mercado.

Além dos diversos trabalhos mencionados, pesquisadores vêm estudando majoritariamente análises técnicas nos últimos anos. O uso de métodos tradicionais de aprendizado de máquina pode ser encontrado no \textit{survey} \cite{review}. A \acrshort{SVM} é amplamente usada, cada uma com suas particularidades \cite{predicting_direction_svm,  hybrid_forecasting, gabased_svm, clustering_svm}; outras abordagens usam redes neurais clássicas e suas variações \cite{forecasting_returns, nn_forecasting}. Conduzindo para uma abordagem mais elegante, \acrshort{RNA} profundas são amplamente usadas em outros estudos \cite{method_rep_studies, increase_decrease, classification_dnn, candlestick}; redes neurais adversárias e convolucionais também são encontradas \cite{adversarial_portifolio, convolutional_image}. Por último, alguns dos trabalhos encontrados conduz estudos com uma abordagem baseada em agentes e algumas das vezes combinada com aprendizado por reforço. \textcite{cryptocurrency} sugerem uma solução para negociação de criptomoedas utilizando um modelo baseado em agente, enquanto \textcite{ftgame} aborda o problema com uma rede neural profunda e um modelo baseado em agente guiado por tal rede. Portanto, observa-se na literatura um conjunto vasto de métodos e técnicas para análise de diversos mercados, mas ainda se mostra um ambiente repleto de oportunidades de pesquisa.

\section{Considerações Finais}

Apesar dos avanços realizados no campo de \acrshort{ML} para o mercado de ações, ainda há inúmeros desafios e problemas na área que essa pesquisa soluciona, diferenciando-se dos trabalhos relacionados nos seguintes aspectos:

 \begin{enumerate}
  \item \label{ASPECT:1} Um sistema de investimento autônomo, racional e baseado em agentes é apresentado com o objetivo de reduzir o esforço humano no mercado de investimentos, lidando com predições e alocações apropriadas de recursos no gerenciamento de portfólios.
  
  \item \label{ASPECT:2} Metodologia investigativa para melhorar as previsões de mercado. Tipicamente, parâmetros são empiricamente definidos e aplicados independentemente do mercado e do ativo. Para tal propósito, este trabalho recorre para otimização de hiper-parâmetros focada em: maior possibilidades de configuração para o usuário, desenvolvimento de algoritmos bem calibrados, e \emph{fuzz testing}; a biblioteca Hyperopt \cite{hyperopt} provê tais características.
  
  \item \label{ASPECT:3} Um mecanismo de predição que utiliza um dos estados da arte de redes neurais recorrentes, a LSTM ~\cite{ga_optimized_lstm}.
  
  \item \label{ASPECT:4} Atenção direcionada individualmente para cada ação selecionada da bolsa de valores B3, em outras palavras, cada ativo do portfólio tem seu próprio modelo especializado com seus próprios parâmetros.
  
   \item \label{ASPECT:5} Um sistema de gerenciamento de recursos financeiros em um portfólio. No qual utiliza um algoritmo estado-da-arte de aprendizado por reforço profundo, denominado \acrlong{DDPG}.
\end{enumerate}

Portanto, este trabalho se destaca em comparação aos demais da literatura recente, tendo em vista os distintos aspectos apresentados. O Aspecto~\ref{ASPECT:1} propõe um sistema de investimento autônomo, diferentemente da maioria dos outros trabalhos analisados \cite{random_forest_macroeconomic, fusionportifolio, ga_optimized_lstm, forecasting_bayesian}, que geralmente propõem estudos focados apenas em um certo modelo. E diferente também de \textcite{airms}, que propõem uma ferramenta projetada para controle de risco. Já o Aspecto~\ref{ASPECT:2} aborda o refinamento de hiper-parâmetros através de um método com etapas bem definidas. Na literatura, \textcite{ga_optimized_lstm} usam uma \acrshort{AG} para encontrar as melhores janelas e unidades de LSTM, mas não considera outros parâmetros como otimizadores e \emph{batch size}. \textcite{forecasting_bayesian} efetuam experimentos com somente dois tamanhos de janela, 24 e 48 horas. \textcite{random_forest_macroeconomic, fusionportifolio} escolhem otimizadores e \emph{kernels}, respectivamente, através de vantagens teóricas, porém não realizam outras experimentações exploratórias. Finalmente, \textcite{airms} calibram os hiper-parâmetros da rede neural artificial experimentando somente com as camadas escondidas e quantidade de épocas. No entanto, todos esses trabalhos apresentam perspectivas mistas e incompletas para a calibração dos hiper-parâmetros, díspar desta pesquisa. O Aspecto~\ref{ASPECT:3} se mostra distintivo quando comparado com \cite{fusionportifolio, airms, forecasting_bayesian}, nos quais usam \acrshort{SVM}, \acrshort{RNA}, e rede Bayesiana, respectivamente. O Aspecto~\ref{ASPECT:4} se distingue quando relacionado com \textcite{forecasting_bayesian, ga_optimized_lstm, fusionportifolio} que focam nos estudos do mercado de moedas. Portanto, nenhum dos trabalhos citados utilizam ativos de empresas fornecidas pelo mercado. Por último, o Aspecto~\ref{ASPECT:5} se distingue quando comparado com \cite{cryptocurrency, ftgame}, nos quais utilizam técnicas baseadas em agente, mas não exploram a aprendizagem por reforço profunda, nem utilizam a aprendizagem por reforço para o gerenciamento de recursos. Por esses motivos, este trabalho propõe o Hare, um serviço de investimento baseado em um sistema de agentes autônomos e racionais que será apresentado no \refCap{4_Desenvolvimento}.

